(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Gr=(t,e)=>t===e,jr=Symbol("solid-track"),Ht={equals:Gr};let Fn=Wn;const at=1,Xt=2,In={owned:null,cleanups:null,context:null,owner:null};var Y=null;let fe=null,k=null,O=null,nt=null,ae=0;function zt(t,e){const n=k,r=Y,i=t.length===0,o=i?In:{owned:null,cleanups:null,context:null,owner:e===void 0?r:e},s=i?t:()=>t(()=>J(()=>ce(o)));Y=o,k=null;try{return Yt(s,!0)}finally{k=n,Y=r}}function wt(t,e){e=e?Object.assign({},Ht,e):Ht;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),On(n,i));return[Yn.bind(n),r]}function lt(t,e,n){const r=Oe(t,e,!1,at);It(r)}function Zr(t,e,n){Fn=ti;const r=Oe(t,e,!1,at);(!n||!n.render)&&(r.user=!0),nt?nt.push(r):It(r)}function st(t,e,n){n=n?Object.assign({},Ht,n):Ht;const r=Oe(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,It(r),Yn.bind(r)}function J(t){if(k===null)return t();const e=k;k=null;try{return t()}finally{k=e}}function Ae(t){return Y===null||(Y.cleanups===null?Y.cleanups=[t]:Y.cleanups.push(t)),t}function Kr(t){const e=st(t),n=st(()=>Te(e()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Yn(){if(this.sources&&this.state)if(this.state===at)It(this);else{const t=O;O=null,Yt(()=>jt(this),!1),O=t}if(k){const t=this.observers?this.observers.length:0;k.sources?(k.sources.push(this),k.sourceSlots.push(t)):(k.sources=[this],k.sourceSlots=[t]),this.observers?(this.observers.push(k),this.observerSlots.push(k.sources.length-1)):(this.observers=[k],this.observerSlots=[k.sources.length-1])}return this.value}function On(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&Yt(()=>{for(let i=0;i<t.observers.length;i+=1){const o=t.observers[i],s=fe&&fe.running;s&&fe.disposed.has(o),(s?!o.tState:!o.state)&&(o.pure?O.push(o):nt.push(o),o.observers&&Bn(o)),s||(o.state=at)}if(O.length>1e6)throw O=[],new Error},!1)),e}function It(t){if(!t.fn)return;ce(t);const e=Y,n=k,r=ae;k=Y=t,Qr(t,t.value,r),k=n,Y=e}function Qr(t,e,n){let r;try{r=t.fn(e)}catch(i){return t.pure&&(t.state=at,t.owned&&t.owned.forEach(ce),t.owned=null),t.updatedAt=n+1,Vn(i)}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?On(t,r):t.value=r,t.updatedAt=n)}function Oe(t,e,n,r=at,i){const o={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Y,context:null,pure:n};return Y===null||Y!==In&&(Y.owned?Y.owned.push(o):Y.owned=[o]),o}function Gt(t){if(t.state===0)return;if(t.state===Xt)return jt(t);if(t.suspense&&J(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<ae);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===at)It(t);else if(t.state===Xt){const r=O;O=null,Yt(()=>jt(t,e[0]),!1),O=r}}function Yt(t,e){if(O)return t();let n=!1;e||(O=[]),nt?n=!0:nt=[],ae++;try{const r=t();return Jr(n),r}catch(r){n||(nt=null),O=null,Vn(r)}}function Jr(t){if(O&&(Wn(O),O=null),t)return;const e=nt;nt=null,e.length&&Yt(()=>Fn(e),!1)}function Wn(t){for(let e=0;e<t.length;e++)Gt(t[e])}function ti(t){let e,n=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[n++]=r:Gt(r)}for(e=0;e<n;e++)Gt(t[e])}function jt(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const i=r.state;i===at?r!==e&&(!r.updatedAt||r.updatedAt<ae)&&Gt(r):i===Xt&&jt(r,e)}}}function Bn(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=Xt,n.pure?O.push(n):nt.push(n),n.observers&&Bn(n))}}function ce(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),s=n.observerSlots.pop();r<i.length&&(o.sourceSlots[s]=r,i[r]=o,n.observerSlots[r]=s)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)ce(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function Vn(t){throw t}function Te(t){if(typeof t=="function"&&!t.length)return Te(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const r=Te(t[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}const ei=Symbol("fallback");function tn(t){for(let e=0;e<t.length;e++)t[e]()}function ni(t,e,n={}){let r=[],i=[],o=[],s=0,a=e.length>1?[]:null;return Ae(()=>tn(o)),()=>{let c=t()||[],l,u;return c[jr],J(()=>{let f=c.length,d,m,y,w,M,b,v,T,C;if(f===0)s!==0&&(tn(o),o=[],r=[],i=[],s=0,a&&(a=[])),n.fallback&&(r=[ei],i[0]=zt(x=>(o[0]=x,n.fallback())),s=1);else if(s===0){for(i=new Array(f),u=0;u<f;u++)r[u]=c[u],i[u]=zt(h);s=f}else{for(y=new Array(f),w=new Array(f),a&&(M=new Array(f)),b=0,v=Math.min(s,f);b<v&&r[b]===c[b];b++);for(v=s-1,T=f-1;v>=b&&T>=b&&r[v]===c[T];v--,T--)y[T]=i[v],w[T]=o[v],a&&(M[T]=a[v]);for(d=new Map,m=new Array(T+1),u=T;u>=b;u--)C=c[u],l=d.get(C),m[u]=l===void 0?-1:l,d.set(C,u);for(l=b;l<=v;l++)C=r[l],u=d.get(C),u!==void 0&&u!==-1?(y[u]=i[l],w[u]=o[l],a&&(M[u]=a[l]),u=m[u],d.set(C,u)):o[l]();for(u=b;u<f;u++)u in y?(i[u]=y[u],o[u]=w[u],a&&(a[u]=M[u],a[u](u))):i[u]=zt(h);i=i.slice(0,s=f),r=c.slice(0)}return i});function h(f){if(o[u]=f,a){const[d,m]=wt(u);return a[u]=m,e(c[u],d)}return e(c[u])}}}function q(t,e){return J(()=>t(e||{}))}const zn=t=>`Stale read from <${t}>.`;function he(t){const e="fallback"in t&&{fallback:()=>t.fallback};return st(ni(()=>t.each,t.children,e||void 0))}function de(t){const e=t.keyed,n=st(()=>t.when,void 0,{equals:(r,i)=>e?r===i:!r==!i});return st(()=>{const r=n();if(r){const i=t.children;return typeof i=="function"&&i.length>0?J(()=>i(e?r:()=>{if(!J(n))throw zn("Show");return t.when})):i}return t.fallback},void 0,void 0)}function ri(t){let e=!1;const n=(o,s)=>o[0]===s[0]&&(e?o[1]===s[1]:!o[1]==!s[1])&&o[2]===s[2],r=Kr(()=>t.children),i=st(()=>{let o=r();Array.isArray(o)||(o=[o]);for(let s=0;s<o.length;s++){const a=o[s].when;if(a)return e=!!o[s].keyed,[s,a,o[s]]}return[-1]},void 0,{equals:n});return st(()=>{const[o,s,a]=i();if(o<0)return t.fallback;const c=a.children;return typeof c=="function"&&c.length>0?J(()=>c(e?s:()=>{if(J(i)[0]!==o)throw zn("Match");return a.when})):c},void 0,void 0)}function en(t){return t}function ii(t,e,n){let r=n.length,i=e.length,o=r,s=0,a=0,c=e[i-1].nextSibling,l=null;for(;s<i||a<o;){if(e[s]===n[a]){s++,a++;continue}for(;e[i-1]===n[o-1];)i--,o--;if(i===s){const u=o<r?a?n[a-1].nextSibling:n[o-a]:c;for(;a<o;)t.insertBefore(n[a++],u)}else if(o===a)for(;s<i;)(!l||!l.has(e[s]))&&e[s].remove(),s++;else if(e[s]===n[o-1]&&n[a]===e[i-1]){const u=e[--i].nextSibling;t.insertBefore(n[a++],e[s++].nextSibling),t.insertBefore(n[--o],u),e[i]=n[o]}else{if(!l){l=new Map;let h=a;for(;h<o;)l.set(n[h],h++)}const u=l.get(e[s]);if(u!=null)if(a<u&&u<o){let h=s,f=1,d;for(;++h<i&&h<o&&!((d=l.get(e[h]))==null||d!==u+f);)f++;if(f>u-a){const m=e[s];for(;a<u;)t.insertBefore(n[a++],m)}else t.replaceChild(n[a++],e[s++])}else s++;else e[s++].remove()}}}const nn="_$DX_DELEGATE";function oi(t,e,n,r={}){let i;return zt(o=>{i=o,e===document?t():G(e,t(),e.firstChild?null:void 0,n)},r.owner),()=>{i(),e.textContent=""}}function tt(t,e,n){let r;const i=()=>{const s=document.createElement("template");return s.innerHTML=t,n?s.content.firstChild.firstChild:s.content.firstChild},o=e?()=>(r||(r=i())).cloneNode(!0):()=>J(()=>document.importNode(r||(r=i()),!0));return o.cloneNode=o,o}function qn(t,e=window.document){const n=e[nn]||(e[nn]=new Set);for(let r=0,i=t.length;r<i;r++){const o=t[r];n.has(o)||(n.add(o),e.addEventListener(o,si))}}function qt(t,e,n){return J(()=>t(e,n))}function G(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return Zt(t,e,r,n);lt(i=>Zt(t,e(),i,n),r)}function si(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[e];if(r&&!n.disabled){const i=n[`${e}Data`];if(i!==void 0?r.call(n,i,t):r.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Zt(t,e,n,r,i){for(;typeof n=="function";)n=n();if(e===n)return n;const o=typeof e,s=r!==void 0;if(t=s&&n[0]&&n[0].parentNode||t,o==="string"||o==="number")if(o==="number"&&(e=e.toString()),s){let a=n[0];a&&a.nodeType===3?a.data=e:a=document.createTextNode(e),n=xt(t,n,r,a)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e;else if(e==null||o==="boolean")n=xt(t,n,r);else{if(o==="function")return lt(()=>{let a=e();for(;typeof a=="function";)a=a();n=Zt(t,a,n,r)}),()=>n;if(Array.isArray(e)){const a=[],c=n&&Array.isArray(n);if(De(a,e,n,i))return lt(()=>n=Zt(t,a,n,r,!0)),()=>n;if(a.length===0){if(n=xt(t,n,r),s)return n}else c?n.length===0?rn(t,a,r):ii(t,n,a):(n&&xt(t),rn(t,a));n=a}else if(e instanceof Node){if(Array.isArray(n)){if(s)return n=xt(t,n,r,e);xt(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}else console.warn("Unrecognized value. Skipped inserting",e)}return n}function De(t,e,n,r){let i=!1;for(let o=0,s=e.length;o<s;o++){let a=e[o],c=n&&n[o];if(a instanceof Node)t.push(a);else if(!(a==null||a===!0||a===!1))if(Array.isArray(a))i=De(t,a,c)||i;else if(typeof a=="function")if(r){for(;typeof a=="function";)a=a();i=De(t,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||i}else t.push(a),i=!0;else{const l=String(a);c&&c.nodeType===3?(c.data=l,t.push(c)):t.push(document.createTextNode(l))}}return i}function rn(t,e,n=null){for(let r=0,i=e.length;r<i;r++)t.insertBefore(e[r],n)}function xt(t,e,n,r){if(n===void 0)return t.textContent="";const i=r||document.createTextNode("");if(e.length){let o=!1;for(let s=e.length-1;s>=0;s--){const a=e[s];if(i!==a){const c=a.parentNode===t;!o&&!s?c?t.replaceChild(i,a):t.insertBefore(i,n):c&&a.remove()}else o=!0}}else t.insertBefore(i,n);return[i]}const ai=tt('<button class="btn btn-blue mt-4">Start'),ci=tt('<button class="btn btn-blue mt-4">Stop'),li=tt('<div class=""><div class="px-4 py-4 bg-gray-100">Status: <span class="font-bold"></div><div class="flex flex-col md:items-start gap-y-2 p-4 bg-blue-100"><div class="labeled"><label class="labeled-label" for="sampling_freq">Sampling Frequency</label><select class="labeled-input" name="sampling_freq" id="sampling_freq"></select></div><div class="labeled"><label class="labeled-label" for="accel_range">Accelerometer range</label><select class="labeled-input" name="accel_range" id="accel_range"></select></div><div class="labeled"><label class="labeled-label" for="gyro_range">Gyro range</label><select class="labeled-input" name="gyro_range" id="gyro_range">'),ui=tt("<option> Hz"),fi=tt("<option> G"),hi=tt("<option> DPS"),di=[12.5,26,52,104,208,416,833,1660,3330,6660],gi=[2,4,8,16],mi=[125,250,500,1e3,2e3],pi=t=>{let e,n,r;const i=()=>{const s=+e.value,a=+n.value,c=+r.value;t.onStart(s,a,c)},o=()=>{t.onStop()};return(()=>{const s=li(),a=s.firstChild,c=a.firstChild,l=c.nextSibling,u=a.nextSibling,h=u.firstChild,f=h.firstChild,d=f.nextSibling,m=h.nextSibling,y=m.firstChild,w=y.nextSibling,M=m.nextSibling,b=M.firstChild,v=b.nextSibling;G(l,()=>t.status);const T=e;typeof T=="function"?qt(T,d):e=d,G(d,q(he,{each:di,children:(_,P)=>(()=>{const N=ui(),U=N.firstChild;return G(N,_,U),lt(()=>N.value=P()),N})()}));const C=n;typeof C=="function"?qt(C,w):n=w,G(w,q(he,{each:gi,children:(_,P)=>(()=>{const N=fi(),U=N.firstChild;return G(N,_,U),lt(()=>N.value=P()),N})()}));const x=r;return typeof x=="function"?qt(x,v):r=v,G(v,q(he,{each:mi,children:(_,P)=>(()=>{const N=hi(),U=N.firstChild;return G(N,_,U),lt(()=>N.value=P()),N})()})),G(u,q(ri,{get children(){return[q(en,{get when(){return t.status==="idle"},get children(){const _=ai();return _.$$click=i,_}}),q(en,{get when(){return t.status==="sampling"},get children(){const _=ci();return _.$$click=o,_}})]}}),null),lt(_=>{const P=t.status!=="idle",N=t.status!=="idle",U=t.status!=="idle";return P!==_._v$&&(d.disabled=_._v$=P),N!==_._v$2&&(w.disabled=_._v$2=N),U!==_._v$3&&(v.disabled=_._v$3=U),_},{_v$:void 0,_v$2:void 0,_v$3:void 0}),s})()};qn(["click"]);const yi=async()=>{const t=await navigator.bluetooth.requestDevice({filters:[{name:"Albert"}],optionalServices:["9e7312e0-2354-11eb-9f10-fbc30a62cf38"]});return new vi(t)},xi=t=>{const e=t.getUint8(0),n=t.getUint16(1,!0),r=t.getInt16(3,!0),i=t.getInt16(5,!0),o=t.getInt16(7,!0),s=t.getInt16(9,!0),a=t.getInt16(11,!0),c=t.getInt16(13,!0);return{id:e,seq:n,accel:{x:r,y:i,z:o},gyro:{x:s,y:a,z:c}}};class vi{device;chars;onConnect;onDisconnect;onStatusChange;onDataReceived;constructor(e){this.device=e}async init(){const n=await(await this.device.gatt?.connect())?.getPrimaryService("9e7312e0-2354-11eb-9f10-fbc30a62cf38");if(n===void 0)throw new Error("Could not get the service");const r=await n.getCharacteristic("9e7312e0-2354-11eb-9f10-fbc30a63cf38"),i=await n.getCharacteristic("9e7312e0-2354-11eb-9f10-fbc30a64cf38"),o=await n.getCharacteristic("9e7312e0-2354-11eb-9f10-fbc30a65cf38"),s=await n.getCharacteristic("9e7312e0-2354-11eb-9f10-fbc30a66cf38"),a=await n.getCharacteristic("9e7312e0-2354-11eb-9f10-fbc30a67cf38"),c=await n.getCharacteristic("9e7312e0-2354-11eb-9f10-fbc30a68cf38");this.chars={state:r,action:i,sampleRate:o,accelRange:s,gyroRange:a,data:c},c.addEventListener("characteristicvaluechanged",l=>{const u=l.target?.value,h=xi(u);this.onDataReceived?.(h)}),await c.startNotifications(),await this.stopSampling(),this.onConnect?.()}async startSampling(e,n,r){if(this.chars===void 0)throw new Error("not connected");const i=Uint8Array.of(e);await this.chars.sampleRate.writeValue(i);const o=Uint8Array.of(n);await this.chars.accelRange.writeValue(o);const s=Uint8Array.of(r);await this.chars.gyroRange.writeValue(s);const a=Uint8Array.of(0);await this.chars.action.writeValue(a),console.log("sampling started"),this.onStatusChange?.("sampling")}async stopSampling(){const e=Uint8Array.of(1);await this.chars?.action.writeValue(e),console.log("sampling stopped"),this.onStatusChange?.("idle")}}function We(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ot(){}var kt=.7,Kt=1/kt,_t="\\s*([+-]?\\d+)\\s*",Ut="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Q="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wi=/^#([0-9a-f]{3,8})$/,bi=new RegExp("^rgb\\("+[_t,_t,_t]+"\\)$"),_i=new RegExp("^rgb\\("+[Q,Q,Q]+"\\)$"),Si=new RegExp("^rgba\\("+[_t,_t,_t,Ut]+"\\)$"),Mi=new RegExp("^rgba\\("+[Q,Q,Q,Ut]+"\\)$"),Ci=new RegExp("^hsl\\("+[Ut,Q,Q]+"\\)$"),Ai=new RegExp("^hsla\\("+[Ut,Q,Q,Ut]+"\\)$"),on={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};We(Ot,$t,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:sn,formatHex:sn,formatHsl:Ti,formatRgb:an,toString:an});function sn(){return this.rgb().formatHex()}function Ti(){return Xn(this).formatHsl()}function an(){return this.rgb().formatRgb()}function $t(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=wi.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?cn(e):n===3?new H(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bi.exec(t))?new H(e[1],e[2],e[3],1):(e=_i.exec(t))?new H(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Si.exec(t))?Bt(e[1],e[2],e[3],e[4]):(e=Mi.exec(t))?Bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ci.exec(t))?fn(e[1],e[2]/100,e[3]/100,1):(e=Ai.exec(t))?fn(e[1],e[2]/100,e[3]/100,e[4]):on.hasOwnProperty(t)?cn(on[t]):t==="transparent"?new H(NaN,NaN,NaN,0):null}function cn(t){return new H(t>>16&255,t>>8&255,t&255,1)}function Bt(t,e,n,r){return r<=0&&(t=e=n=NaN),new H(t,e,n,r)}function Di(t){return t instanceof Ot||(t=$t(t)),t?(t=t.rgb(),new H(t.r,t.g,t.b,t.opacity)):new H}function St(t,e,n,r){return arguments.length===1?Di(t):new H(t,e,n,r??1)}function H(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}We(H,St,Hn(Ot,{brighter:function(t){return t=t==null?Kt:Math.pow(Kt,t),new H(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?kt:Math.pow(kt,t),new H(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ln,formatHex:ln,formatRgb:un,toString:un}));function ln(){return"#"+ge(this.r)+ge(this.g)+ge(this.b)}function un(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function ge(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function fn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Z(t,e,n,r)}function Xn(t){if(t instanceof Z)return new Z(t.h,t.s,t.l,t.opacity);if(t instanceof Ot||(t=$t(t)),!t)return new Z;if(t instanceof Z)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Z(s,a,c,t.opacity)}function Ri(t,e,n,r){return arguments.length===1?Xn(t):new Z(t,e,n,r??1)}function Z(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}We(Z,Ri,Hn(Ot,{brighter:function(t){return t=t==null?Kt:Math.pow(Kt,t),new Z(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?kt:Math.pow(kt,t),new Z(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new H(me(t>=240?t-240:t+120,i,r),me(t,i,r),me(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function me(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Gn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Be(t){let e=t,n=t;t.length===1&&(e=(s,a)=>t(s)-a,n=Ei(t));function r(s,a,c,l){for(c==null&&(c=0),l==null&&(l=s.length);c<l;){const u=c+l>>>1;n(s[u],a)<0?c=u+1:l=u}return c}function i(s,a,c,l){for(c==null&&(c=0),l==null&&(l=s.length);c<l;){const u=c+l>>>1;n(s[u],a)>0?l=u:c=u+1}return c}function o(s,a,c,l){c==null&&(c=0),l==null&&(l=s.length);const u=r(s,a,c,l-1);return u>c&&e(s[u-1],a)>-e(s[u],a)?u-1:u}return{left:r,center:o,right:i}}function Ei(t){return(e,n)=>Gn(t(e),n)}function Ni(t){return t===null?NaN:+t}const Li=Be(Gn),Pi=Li.right;Be(Ni).center;const ki=Pi;var Re=Math.sqrt(50),Ee=Math.sqrt(10),Ne=Math.sqrt(2);function Ui(t,e,n){var r,i=-1,o,s,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),(a=jn(t,e,n))===0||!isFinite(a))return[];if(a>0){let c=Math.round(t/a),l=Math.round(e/a);for(c*a<t&&++c,l*a>e&&--l,s=new Array(o=l-c+1);++i<o;)s[i]=(c+i)*a}else{a=-a;let c=Math.round(t*a),l=Math.round(e*a);for(c/a<t&&++c,l/a>e&&--l,s=new Array(o=l-c+1);++i<o;)s[i]=(c+i)/a}return r&&s.reverse(),s}function jn(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Re?10:o>=Ee?5:o>=Ne?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Re?10:o>=Ee?5:o>=Ne?2:1)}function Le(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Re?i*=10:o>=Ee?i*=5:o>=Ne&&(i*=2),e<t?-i:i}function Zn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Ve=t=>()=>t;function $i(t,e){return function(n){return t+n*e}}function Fi(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ii(t){return(t=+t)==1?Kn:function(e,n){return n-e?Fi(e,n,t):Ve(isNaN(e)?n:e)}}function Kn(t,e){var n=e-t;return n?$i(t,n):Ve(isNaN(t)?e:t)}const hn=function t(e){var n=Ii(e);function r(i,o){var s=n((i=St(i)).r,(o=St(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),l=Kn(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function Yi(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Oi(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Wi(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=ze(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function Bi(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Qt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vi(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ze(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Pe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pe=new RegExp(Pe.source,"g");function zi(t){return function(){return t}}function qi(t){return function(e){return t(e)+""}}function Hi(t,e){var n=Pe.lastIndex=pe.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Pe.exec(t))&&(i=pe.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:Qt(r,i)})),n=pe.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?qi(c[0].x):zi(e):(e=c.length,function(l){for(var u=0,h;u<e;++u)a[(h=c[u]).i]=h.x(l);return a.join("")})}function ze(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ve(e):(n==="number"?Qt:n==="string"?(r=$t(e))?(e=r,hn):Hi:e instanceof $t?hn:e instanceof Date?Bi:Oi(e)?Yi:Array.isArray(e)?Wi:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vi:Qt)(t,e)}function Xi(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Gi(t){return function(){return t}}function ji(t){return+t}var dn=[0,1];function bt(t){return t}function ke(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Gi(isNaN(e)?NaN:.5)}function Zi(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ki(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=ke(i,r),o=n(s,o)):(r=ke(r,i),o=n(o,s)),function(a){return o(r(a))}}function Qi(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=ke(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var c=ki(t,a,1,r)-1;return o[c](i[c](a))}}function Qn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ji(){var t=dn,e=dn,n=ze,r,i,o,s=bt,a,c,l;function u(){var f=Math.min(t.length,e.length);return s!==bt&&(s=Zi(t[0],t[f-1])),a=f>2?Qi:Ki,c=l=null,h}function h(f){return f==null||isNaN(f=+f)?o:(c||(c=a(t.map(r),e,n)))(r(s(f)))}return h.invert=function(f){return s(i((l||(l=a(e,t.map(r),Qt)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,ji),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=Xi,u()},h.clamp=function(f){return arguments.length?(s=f?!0:bt,u()):s!==bt},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(o=f,h):o},function(f,d){return r=f,i=d,u()}}function Jn(){return Ji()(bt,bt)}function to(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Jt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Mt(t){return t=Jt(Math.abs(t)),t?t[1]:NaN}function eo(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function no(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var ro=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function te(t){if(!(e=ro.exec(t)))throw new Error("invalid format: "+t);var e;return new qe({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}te.prototype=qe.prototype;function qe(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}qe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function io(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var tr;function oo(t,e){var n=Jt(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(tr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Jt(t,Math.max(0,e+o-1))[0]}function gn(t,e){var n=Jt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const mn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:to,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gn(t*100,e),r:gn,s:oo,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pn(t){return t}var yn=Array.prototype.map,xn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function so(t){var e=t.grouping===void 0||t.thousands===void 0?pn:eo(yn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?pn:no(yn.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(h){h=te(h);var f=h.fill,d=h.align,m=h.sign,y=h.symbol,w=h.zero,M=h.width,b=h.comma,v=h.precision,T=h.trim,C=h.type;C==="n"?(b=!0,C="g"):mn[C]||(v===void 0&&(v=12),T=!0,C="g"),(w||f==="0"&&d==="=")&&(w=!0,f="0",d="=");var x=y==="$"?n:y==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",_=y==="$"?r:/[%p]/.test(C)?s:"",P=mn[C],N=/[defgprs%]/.test(C);v=v===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function U(S){var F=x,$=_,rt,Wt,mt;if(C==="c")$=P(S)+$,S="";else{S=+S;var pt=S<0||1/S<0;if(S=isNaN(S)?c:P(Math.abs(S),v),T&&(S=io(S)),pt&&+S==0&&m!=="+"&&(pt=!1),F=(pt?m==="("?m:a:m==="-"||m==="("?"":m)+F,$=(C==="s"?xn[8+tr/3]:"")+$+(pt&&m==="("?")":""),N){for(rt=-1,Wt=S.length;++rt<Wt;)if(mt=S.charCodeAt(rt),48>mt||mt>57){$=(mt===46?i+S.slice(rt+1):S.slice(rt))+$,S=S.slice(0,rt);break}}}b&&!w&&(S=e(S,1/0));var yt=F.length+S.length+$.length,j=yt<M?new Array(M-yt+1).join(f):"";switch(b&&w&&(S=e(j+S,j.length?M-$.length:1/0),j=""),d){case"<":S=F+S+$+j;break;case"=":S=F+j+S+$;break;case"^":S=j.slice(0,yt=j.length>>1)+F+S+$+j.slice(yt);break;default:S=j+F+S+$;break}return o(S)}return U.toString=function(){return h+""},U}function u(h,f){var d=l((h=te(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(Mt(f)/3)))*3,y=Math.pow(10,-m),w=xn[8+m/3];return function(M){return d(y*M)+w}}return{format:l,formatPrefix:u}}var Vt,er,nr;ao({thousands:",",grouping:[3],currency:["$",""]});function ao(t){return Vt=so(t),er=Vt.format,nr=Vt.formatPrefix,Vt}function co(t){return Math.max(0,-Mt(Math.abs(t)))}function lo(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mt(e)/3)))*3-Mt(Math.abs(t)))}function uo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Mt(e)-Mt(t))+1}function fo(t,e,n,r){var i=Le(t,e,n),o;switch(r=te(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=lo(i,s))&&(r.precision=o),nr(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=uo(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=co(i))&&(r.precision=o-(r.type==="%")*2);break}}return er(r)}function ho(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ui(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return fo(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],c,l,u=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);u-- >0;){if(l=jn(s,a,n),l===c)return r[i]=s,r[o]=a,e(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;c=l}return t},t}function Ue(){var t=Jn();return t.copy=function(){return Qn(t,Ue())},Zn.apply(t,arguments),ho(t)}function go(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}var ye=new Date,xe=new Date;function W(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return t(o=new Date(+o)),o},i.ceil=function(o){return t(o=new Date(o-1)),e(o,1),t(o),o},i.round=function(o){var s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=function(o,s){return e(o=new Date(+o),s==null?1:Math.floor(s)),o},i.range=function(o,s,a){var c=[],l;if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return c;do c.push(l=new Date(+o)),e(o,a),t(o);while(l<o&&o<s);return c},i.filter=function(o){return W(function(s){if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},function(s,a){if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););})},n&&(i.count=function(o,s){return ye.setTime(+o),xe.setTime(+s),t(ye),t(xe),Math.floor(n(ye,xe))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?function(s){return r(s)%o===0}:function(s){return i.count(0,s)%o===0}):i}),i}var ee=W(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ee.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?W(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):ee};const mo=ee;ee.range;const et=1e3,K=et*60,ut=K*60,ft=ut*24,He=ft*7,vn=ft*30,ve=ft*365;var rr=W(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*et)},function(t,e){return(e-t)/et},function(t){return t.getUTCSeconds()});const Et=rr;rr.range;var ir=W(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*et)},function(t,e){t.setTime(+t+e*K)},function(t,e){return(e-t)/K},function(t){return t.getMinutes()});const or=ir;ir.range;var sr=W(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*et-t.getMinutes()*K)},function(t,e){t.setTime(+t+e*ut)},function(t,e){return(e-t)/ut},function(t){return t.getHours()});const ar=sr;sr.range;var cr=W(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*K)/ft,t=>t.getDate()-1);const le=cr;cr.range;function dt(t){return W(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*K)/He})}var ue=dt(0),ne=dt(1),po=dt(2),yo=dt(3),Ct=dt(4),xo=dt(5),vo=dt(6);ue.range;ne.range;po.range;yo.range;Ct.range;xo.range;vo.range;var lr=W(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const ur=lr;lr.range;var Xe=W(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Xe.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:W(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const ht=Xe;Xe.range;var fr=W(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/ft},function(t){return t.getUTCDate()-1});const hr=fr;fr.range;function gt(t){return W(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/He})}var dr=gt(0),re=gt(1),wo=gt(2),bo=gt(3),At=gt(4),_o=gt(5),So=gt(6);dr.range;re.range;wo.range;bo.range;At.range;_o.range;So.range;var Ge=W(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Ge.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:W(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const Ft=Ge;Ge.range;function Mo(t,e,n,r,i,o){const s=[[Et,1,et],[Et,5,5*et],[Et,15,15*et],[Et,30,30*et],[o,1,K],[o,5,5*K],[o,15,15*K],[o,30,30*K],[i,1,ut],[i,3,3*ut],[i,6,6*ut],[i,12,12*ut],[r,1,ft],[r,2,2*ft],[n,1,He],[e,1,vn],[e,3,3*vn],[t,1,ve]];function a(l,u,h){const f=u<l;f&&([l,u]=[u,l]);const d=h&&typeof h.range=="function"?h:c(l,u,h),m=d?d.range(l,+u+1):[];return f?m.reverse():m}function c(l,u,h){const f=Math.abs(u-l)/h,d=Be(([,,w])=>w).right(s,f);if(d===s.length)return t.every(Le(l/ve,u/ve,h));if(d===0)return mo.every(Math.max(Le(l,u,h),1));const[m,y]=s[f/s[d-1][2]<s[d][2]/f?d-1:d];return m.every(y)}return[a,c]}const[Co,Ao]=Mo(ht,ur,ue,le,ar,or);function we(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function be(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Tt(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function To(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,c=t.shortMonths,l=Dt(i),u=Rt(i),h=Dt(o),f=Rt(o),d=Dt(s),m=Rt(s),y=Dt(a),w=Rt(a),M=Dt(c),b=Rt(c),v={a:pt,A:yt,b:j,B:Yr,c:null,d:Cn,e:Cn,f:Zo,g:ss,G:cs,H:Xo,I:Go,j:jo,L:gr,m:Ko,M:Qo,p:Or,q:Wr,Q:Dn,s:Rn,S:Jo,u:ts,U:es,V:ns,w:rs,W:is,x:null,X:null,y:os,Y:as,Z:ls,"%":Tn},T={a:Br,A:Vr,b:zr,B:qr,c:null,d:An,e:An,f:ds,g:Ss,G:Cs,H:us,I:fs,j:hs,L:pr,m:gs,M:ms,p:Hr,q:Xr,Q:Dn,s:Rn,S:ps,u:ys,U:xs,V:vs,w:ws,W:bs,x:null,X:null,y:_s,Y:Ms,Z:As,"%":Tn},C={a:U,A:S,b:F,B:$,c:rt,d:Sn,e:Sn,f:Vo,g:_n,G:bn,H:Mn,I:Mn,j:Yo,L:Bo,m:Io,M:Oo,p:N,q:Fo,Q:qo,s:Ho,S:Wo,u:Lo,U:Po,V:ko,w:No,W:Uo,x:Wt,X:mt,y:_n,Y:bn,Z:$o,"%":zo};v.x=x(n,v),v.X=x(r,v),v.c=x(e,v),T.x=x(n,T),T.X=x(r,T),T.c=x(e,T);function x(p,A){return function(D){var g=[],B=-1,L=0,V=p.length,z,ct,Je;for(D instanceof Date||(D=new Date(+D));++B<V;)p.charCodeAt(B)===37&&(g.push(p.slice(L,B)),(ct=wn[z=p.charAt(++B)])!=null?z=p.charAt(++B):ct=z==="e"?" ":"0",(Je=A[z])&&(z=Je(D,ct)),g.push(z),L=B+1);return g.push(p.slice(L,B)),g.join("")}}function _(p,A){return function(D){var g=Tt(1900,void 0,1),B=P(g,p,D+="",0),L,V;if(B!=D.length)return null;if("Q"in g)return new Date(g.Q);if("s"in g)return new Date(g.s*1e3+("L"in g?g.L:0));if(A&&!("Z"in g)&&(g.Z=0),"p"in g&&(g.H=g.H%12+g.p*12),g.m===void 0&&(g.m="q"in g?g.q:0),"V"in g){if(g.V<1||g.V>53)return null;"w"in g||(g.w=1),"Z"in g?(L=be(Tt(g.y,0,1)),V=L.getUTCDay(),L=V>4||V===0?re.ceil(L):re(L),L=hr.offset(L,(g.V-1)*7),g.y=L.getUTCFullYear(),g.m=L.getUTCMonth(),g.d=L.getUTCDate()+(g.w+6)%7):(L=we(Tt(g.y,0,1)),V=L.getDay(),L=V>4||V===0?ne.ceil(L):ne(L),L=le.offset(L,(g.V-1)*7),g.y=L.getFullYear(),g.m=L.getMonth(),g.d=L.getDate()+(g.w+6)%7)}else("W"in g||"U"in g)&&("w"in g||(g.w="u"in g?g.u%7:"W"in g?1:0),V="Z"in g?be(Tt(g.y,0,1)).getUTCDay():we(Tt(g.y,0,1)).getDay(),g.m=0,g.d="W"in g?(g.w+6)%7+g.W*7-(V+5)%7:g.w+g.U*7-(V+6)%7);return"Z"in g?(g.H+=g.Z/100|0,g.M+=g.Z%100,be(g)):we(g)}}function P(p,A,D,g){for(var B=0,L=A.length,V=D.length,z,ct;B<L;){if(g>=V)return-1;if(z=A.charCodeAt(B++),z===37){if(z=A.charAt(B++),ct=C[z in wn?A.charAt(B++):z],!ct||(g=ct(p,D,g))<0)return-1}else if(z!=D.charCodeAt(g++))return-1}return g}function N(p,A,D){var g=l.exec(A.slice(D));return g?(p.p=u.get(g[0].toLowerCase()),D+g[0].length):-1}function U(p,A,D){var g=d.exec(A.slice(D));return g?(p.w=m.get(g[0].toLowerCase()),D+g[0].length):-1}function S(p,A,D){var g=h.exec(A.slice(D));return g?(p.w=f.get(g[0].toLowerCase()),D+g[0].length):-1}function F(p,A,D){var g=M.exec(A.slice(D));return g?(p.m=b.get(g[0].toLowerCase()),D+g[0].length):-1}function $(p,A,D){var g=y.exec(A.slice(D));return g?(p.m=w.get(g[0].toLowerCase()),D+g[0].length):-1}function rt(p,A,D){return P(p,e,A,D)}function Wt(p,A,D){return P(p,n,A,D)}function mt(p,A,D){return P(p,r,A,D)}function pt(p){return s[p.getDay()]}function yt(p){return o[p.getDay()]}function j(p){return c[p.getMonth()]}function Yr(p){return a[p.getMonth()]}function Or(p){return i[+(p.getHours()>=12)]}function Wr(p){return 1+~~(p.getMonth()/3)}function Br(p){return s[p.getUTCDay()]}function Vr(p){return o[p.getUTCDay()]}function zr(p){return c[p.getUTCMonth()]}function qr(p){return a[p.getUTCMonth()]}function Hr(p){return i[+(p.getUTCHours()>=12)]}function Xr(p){return 1+~~(p.getUTCMonth()/3)}return{format:function(p){var A=x(p+="",v);return A.toString=function(){return p},A},parse:function(p){var A=_(p+="",!1);return A.toString=function(){return p},A},utcFormat:function(p){var A=x(p+="",T);return A.toString=function(){return p},A},utcParse:function(p){var A=_(p+="",!0);return A.toString=function(){return p},A}}}var wn={"-":"",_:" ",0:"0"},I=/^\s*\d+/,Do=/^%/,Ro=/[\\^$*+?|[\]().{}]/g;function R(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Eo(t){return t.replace(Ro,"\\$&")}function Dt(t){return new RegExp("^(?:"+t.map(Eo).join("|")+")","i")}function Rt(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function No(t,e,n){var r=I.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Lo(t,e,n){var r=I.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Po(t,e,n){var r=I.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ko(t,e,n){var r=I.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Uo(t,e,n){var r=I.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function bn(t,e,n){var r=I.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function _n(t,e,n){var r=I.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function $o(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Fo(t,e,n){var r=I.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Io(t,e,n){var r=I.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Sn(t,e,n){var r=I.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Yo(t,e,n){var r=I.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Mn(t,e,n){var r=I.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Oo(t,e,n){var r=I.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Wo(t,e,n){var r=I.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Bo(t,e,n){var r=I.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Vo(t,e,n){var r=I.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function zo(t,e,n){var r=Do.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function qo(t,e,n){var r=I.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ho(t,e,n){var r=I.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Cn(t,e){return R(t.getDate(),e,2)}function Xo(t,e){return R(t.getHours(),e,2)}function Go(t,e){return R(t.getHours()%12||12,e,2)}function jo(t,e){return R(1+le.count(ht(t),t),e,3)}function gr(t,e){return R(t.getMilliseconds(),e,3)}function Zo(t,e){return gr(t,e)+"000"}function Ko(t,e){return R(t.getMonth()+1,e,2)}function Qo(t,e){return R(t.getMinutes(),e,2)}function Jo(t,e){return R(t.getSeconds(),e,2)}function ts(t){var e=t.getDay();return e===0?7:e}function es(t,e){return R(ue.count(ht(t)-1,t),e,2)}function mr(t){var e=t.getDay();return e>=4||e===0?Ct(t):Ct.ceil(t)}function ns(t,e){return t=mr(t),R(Ct.count(ht(t),t)+(ht(t).getDay()===4),e,2)}function rs(t){return t.getDay()}function is(t,e){return R(ne.count(ht(t)-1,t),e,2)}function os(t,e){return R(t.getFullYear()%100,e,2)}function ss(t,e){return t=mr(t),R(t.getFullYear()%100,e,2)}function as(t,e){return R(t.getFullYear()%1e4,e,4)}function cs(t,e){var n=t.getDay();return t=n>=4||n===0?Ct(t):Ct.ceil(t),R(t.getFullYear()%1e4,e,4)}function ls(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+R(e/60|0,"0",2)+R(e%60,"0",2)}function An(t,e){return R(t.getUTCDate(),e,2)}function us(t,e){return R(t.getUTCHours(),e,2)}function fs(t,e){return R(t.getUTCHours()%12||12,e,2)}function hs(t,e){return R(1+hr.count(Ft(t),t),e,3)}function pr(t,e){return R(t.getUTCMilliseconds(),e,3)}function ds(t,e){return pr(t,e)+"000"}function gs(t,e){return R(t.getUTCMonth()+1,e,2)}function ms(t,e){return R(t.getUTCMinutes(),e,2)}function ps(t,e){return R(t.getUTCSeconds(),e,2)}function ys(t){var e=t.getUTCDay();return e===0?7:e}function xs(t,e){return R(dr.count(Ft(t)-1,t),e,2)}function yr(t){var e=t.getUTCDay();return e>=4||e===0?At(t):At.ceil(t)}function vs(t,e){return t=yr(t),R(At.count(Ft(t),t)+(Ft(t).getUTCDay()===4),e,2)}function ws(t){return t.getUTCDay()}function bs(t,e){return R(re.count(Ft(t)-1,t),e,2)}function _s(t,e){return R(t.getUTCFullYear()%100,e,2)}function Ss(t,e){return t=yr(t),R(t.getUTCFullYear()%100,e,2)}function Ms(t,e){return R(t.getUTCFullYear()%1e4,e,4)}function Cs(t,e){var n=t.getUTCDay();return t=n>=4||n===0?At(t):At.ceil(t),R(t.getUTCFullYear()%1e4,e,4)}function As(){return"+0000"}function Tn(){return"%"}function Dn(t){return+t}function Rn(t){return Math.floor(+t/1e3)}var vt,xr;Ts({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ts(t){return vt=To(t),xr=vt.format,vt.parse,vt.utcFormat,vt.utcParse,vt}function Ds(t){return new Date(t)}function Rs(t){return t instanceof Date?+t:+new Date(+t)}function vr(t,e,n,r,i,o,s,a,c,l){var u=Jn(),h=u.invert,f=u.domain,d=l(".%L"),m=l(":%S"),y=l("%I:%M"),w=l("%I %p"),M=l("%a %d"),b=l("%b %d"),v=l("%B"),T=l("%Y");function C(x){return(c(x)<x?d:a(x)<x?m:s(x)<x?y:o(x)<x?w:r(x)<x?i(x)<x?M:b:n(x)<x?v:T)(x)}return u.invert=function(x){return new Date(h(x))},u.domain=function(x){return arguments.length?f(Array.from(x,Rs)):f().map(Ds)},u.ticks=function(x){var _=f();return t(_[0],_[_.length-1],x??10)},u.tickFormat=function(x,_){return _==null?C:l(_)},u.nice=function(x){var _=f();return(!x||typeof x.range!="function")&&(x=e(_[0],_[_.length-1],x??10)),x?f(go(_,x)):u},u.copy=function(){return Qn(u,vr(t,e,n,r,i,o,s,a,c,l))},u}function Es(){return Zn.apply(vr(Co,Ao,ht,ur,ue,le,ar,or,Et,xr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $e(t,e,n,r,i){if(e>=n||r<=i(t[e]))return e;if(r>i(t[n-1]))return n;for(n-=1;e+1<n;){const o=i(t[e]),s=i(t[n]),a=s<=o?0:(r-o)/(s-o);let c=Math.ceil(e+a*(n-e));c===n?c--:c===e&&c++,i(t[c])<r?e=c:n=c}return n}class it{constructor(){this.callbacks=[]}on(e){this.callbacks.push(e)}dispatch(...e){for(const n of this.callbacks)n(...e)}}function Ns(t){let e=-1/0,n=1/0;for(const r of t)r>e&&(e=r),r<n&&(n=r);return{max:e,min:n}}class Ls{constructor(e){this.options=e,this.xScale=Ue(),this.yScale=Ue(),this.xRange=null,this.yRange=null,this.seriesInfo=new Map,this.resized=new it,this.updated=new it,this.disposing=new it,this.disposed=!1,this.redrawRequested=!1,e.xRange!=="auto"&&e.xRange&&this.xScale.domain([e.xRange.min,e.xRange.max]),e.yRange!=="auto"&&e.yRange&&this.yScale.domain([e.yRange.min,e.yRange.max])}resize(e,n){const r=this.options;this.xScale.range([r.paddingLeft,e-r.paddingRight]),this.yScale.range([n-r.paddingBottom,r.paddingTop]),this.resized.dispatch(e,n),this.requestRedraw()}dispose(){this.disposed||(this.disposing.dispatch(),this.disposed=!0)}update(){this.updateModel(),this.updated.dispatch()}updateModel(){var e,n;for(const s of this.options.series)this.seriesInfo.has(s)||this.seriesInfo.set(s,{yRangeUpdatedIndex:0});const r=this.options.series.filter(s=>s.data.length>0);if(r.length===0)return;const i=this.options.xRange,o=this.options.yRange;{const s=Math.max(...r.map(c=>c.data[c.data.length-1].x)),a=(n=(e=this.xRange)===null||e===void 0?void 0:e.min)!==null&&n!==void 0?n:Math.min(...r.map(c=>c.data[0].x));if(this.xRange={max:s,min:a},this.options.realTime||i==="auto")if(this.options.realTime){const c=this.xScale.domain(),l=c[1]-c[0];this.xScale.domain([s-l,s])}else this.xScale.domain([a,s]);else i&&this.xScale.domain([i.min,i.max])}{const s=r.map(l=>{const u=l.data.slice(this.seriesInfo.get(l).yRangeUpdatedIndex).map(h=>h.y);return Ns(u)});this.yRange&&s.push(this.yRange);const a=Math.min(...s.map(l=>l.min)),c=Math.max(...s.map(l=>l.max));if(this.yRange={max:c,min:a},o==="auto"){this.yScale.domain([a,c]).nice();for(const l of r)this.seriesInfo.get(l).yRangeUpdatedIndex=l.data.length}else o&&this.yScale.domain([o.min,o.max])}}requestRedraw(){this.redrawRequested||(this.redrawRequested=!0,requestAnimationFrame(e=>{this.redrawRequested=!1,this.disposed||this.update()}))}pxPoint(e){return{x:this.xScale(e.x),y:this.yScale(e.y)}}}var Fe=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Nt(){var t=new Fe(2);return Fe!=Float32Array&&(t[0]=0,t[1]=0),t}function Ps(t,e){var n=new Fe(2);return n[0]=t,n[1]=e,n}function ks(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Us(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function $s(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Fs(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Is(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}(function(){var t=Nt();return function(e,n,r,i,o,s){var a,c;for(n||(n=2),r||(r=0),i?c=Math.min(i*n+r,e.length):c=e.length,a=r;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}})();class Ys{constructor(e,n,r,i){this.gl=e,this.debug=i;const o=ot(e.createProgram());e.attachShader(o,ot(En(e,e.VERTEX_SHADER,n,i))),e.attachShader(o,ot(En(e,e.FRAGMENT_SHADER,r,i))),this.program=o}link(){var e;const n=this.gl,r=this.program;if(n.linkProgram(r),this.debug&&!n.getProgramParameter(r,n.LINK_STATUS)){const o=(e=n.getProgramInfoLog(r))!==null&&e!==void 0?e:"Unknown Error.";throw n.deleteProgram(r),new Error(o)}}use(){this.gl.useProgram(this.program)}}function En(t,e,n,r){var i;const o=ot(t.createShader(e));if(t.shaderSource(o,n),t.compileShader(o),r&&!t.getShaderParameter(o,t.COMPILE_STATUS)){const a=(i=t.getShaderInfoLog(o))!==null&&i!==void 0?i:"Unknown Error.";throw t.deleteShader(o),new Error(a)}return o}function ot(t){if(!t)throw new Error("value must not be falsy");return t}function wr(t){const e=St(t);return[e.r/255,e.g/255,e.b/255,e.opacity]}function Os(t){const e=`
uniform vec2 uModelScale;
uniform vec2 uModelTranslation;
uniform vec2 uProjectionScale;
uniform float uLineWidth;

void main() {
    vec2 cssPose = uModelScale * aDataPoint + uModelTranslation;
    vec2 dir = uModelScale * aDir;
    dir = normalize(dir);
    vec2 pos2d = uProjectionScale * (cssPose + vec2(-dir.y, dir.x) * uLineWidth);
    gl_Position = vec4(pos2d, 0, 1);
}`;return t instanceof WebGLRenderingContext?`
attribute vec2 aDataPoint;
attribute vec2 aDir;
${e}`:`#version 300 es
layout (location = 0) in vec2 aDataPoint;
layout (location = 1) in vec2 aDir;
${e}`}function Ws(t){return t instanceof WebGLRenderingContext?`
precision lowp float;
uniform vec4 uColor;
void main() {
    gl_FragColor = uColor;
}`:`#version 300 es
precision lowp float;
uniform vec4 uColor;
out vec4 outColor;
void main() {
    outColor = uColor;
}`}class Bs extends Ys{constructor(e,n){super(e,Os(e),Ws(e),n),e instanceof WebGLRenderingContext&&(e.bindAttribLocation(this.program,0,"aDataPoint"),e.bindAttribLocation(this.program,1,"aDir")),this.link();const r=i=>ot(e.getUniformLocation(this.program,i));this.locations={uModelScale:r("uModelScale"),uModelTranslation:r("uModelTranslation"),uProjectionScale:r("uProjectionScale"),uLineWidth:r("uLineWidth"),uColor:r("uColor")}}}const je=4,Pt=4,br=je*Pt,_e=je*Float32Array.BYTES_PER_ELEMENT,ie=128*1024,Vs=ie*br+2*Pt;class zs{constructor(e){this.gl=e,this.vao=ot(e.createVertexArray()),this.bind()}bind(){this.gl.bindVertexArray(this.vao)}clear(){this.gl.deleteVertexArray(this.vao)}}class qs{constructor(e){this.vaoExt=e,this.vao=ot(e.createVertexArrayOES()),this.bind()}bind(){this.vaoExt.bindVertexArrayOES(this.vao)}clear(){this.vaoExt.deleteVertexArrayOES(this.vao)}}class Hs{constructor(e){this.bindFunc=e}bind(){this.bindFunc()}clear(){}}class Xs{constructor(e,n,r){this.gl=e,this.dataPoints=n,this.firstDataPointIndex=r,this.length=0,this.dataBuffer=ot(e.createBuffer());const i=()=>{e.bindBuffer(e.ARRAY_BUFFER,this.dataBuffer),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,_e,0),e.enableVertexAttribArray(1),e.vertexAttribPointer(1,2,e.FLOAT,!1,_e,2*Float32Array.BYTES_PER_ELEMENT)};if(e instanceof WebGLRenderingContext){const o=e.getExtension("OES_vertex_array_object");o?this.vao=new qs(o):this.vao=new Hs(i)}else this.vao=new zs(e);i(),e.bufferData(e.ARRAY_BUFFER,Vs*Float32Array.BYTES_PER_ELEMENT,e.DYNAMIC_DRAW)}clear(){this.length=0}delete(){this.clear(),this.gl.deleteBuffer(this.dataBuffer),this.vao.clear()}addDataPoints(){const e=this.dataPoints,n=this.firstDataPointIndex+this.length,r=ie-this.length,i=e.length-n,o=r<i,s=o?r:i;let a=br*s;o&&(a+=2*je);const c=new Float32Array(a);let l=0;const u=Nt(),h=Nt(),f=Nt(),d=Nt();function m(b,v){u[0]=b.x,u[1]=b.y,h[0]=v.x,h[1]=v.y,ks(f,u,h),Is(f,f),$s(d,f)}function y(b){c[l]=b[0],c[l+1]=b[1],l+=2}let w=e[n-1];for(let b=0;b<s;b++){const v=e[n+b];m(v,w),w=v;for(const T of[h,u])for(const C of[f,d])y(T),y(C)}if(o){m(e[n+s],w);for(const b of[f,d])y(h),y(b)}const M=this.gl;return M.bindBuffer(M.ARRAY_BUFFER,this.dataBuffer),M.bufferSubData(M.ARRAY_BUFFER,_e*Pt*this.length,c),this.length+=s,n+s}draw(e){const n=Math.max(0,e.min-this.firstDataPointIndex),i=Math.min(this.length,e.max-this.firstDataPointIndex)-n,o=this.gl;this.vao.bind(),o.drawArrays(o.TRIANGLE_STRIP,n*Pt,i*Pt)}}class Gs{constructor(e,n){this.gl=e,this.series=n,this.vertexArrays=[]}syncBuffer(){let e,n=1;const r=()=>{e=new Xs(this.gl,this.series.data,n),this.vertexArrays.push(e)};if(this.vertexArrays.length>0){const i=this.vertexArrays[this.vertexArrays.length-1];if(n=i.firstDataPointIndex+i.length,n>this.series.data.length)throw new Error("remove data unsupported.");if(n===this.series.data.length)return;e=i}else if(this.series.data.length>=2)r(),e=e;else return;for(;;){if(n=e.addDataPoints(),n>=this.series.data.length){if(n>this.series.data.length)throw Error("Assertion failed.");break}r()}}draw(e){const n=this.series.data;if(this.vertexArrays.length===0||n[0].x>e.max||n[n.length-1].x<e.min)return;const r=l=>l.x,i=$e(n,1,n.length,e.min,r),o=$e(n,i,n.length-1,e.max,r)+1,s=Math.floor((i-1)/ie),a=Math.ceil((o-1)/ie),c={min:i,max:o};for(let l=s;l<a;l++)this.vertexArrays[l].draw(c)}}class js{constructor(e,n,r){this.model=e,this.gl=n,this.options=r,this.program=new Bs(this.gl,this.options.debugWebGL),this.arrays=new Map,this.height=0,this.width=0,this.program.use(),e.updated.on(()=>this.drawFrame()),e.resized.on((i,o)=>this.onResize(i,o))}syncBuffer(){for(const e of this.options.series){let n=this.arrays.get(e);n||(n=new Gs(this.gl,e),this.arrays.set(e,n)),n.syncBuffer()}}onResize(e,n){this.height=n,this.width=e;const r=Ps(e,n);Us(r,r,[2,2]),Fs(r,r),this.gl.uniform2fv(this.program.locations.uProjectionScale,r)}drawFrame(){var e;this.syncBuffer(),this.syncDomain();const n=this.gl;for(const[r,i]of this.arrays){if(!r.visible)continue;const o=wr(r.color);n.uniform4fv(this.program.locations.uColor,o);const s=(e=r.lineWidth)!==null&&e!==void 0?e:this.options.lineWidth;n.uniform1f(this.program.locations.uLineWidth,s/2);const a={min:this.model.xScale.invert(-s/2),max:this.model.xScale.invert(this.width+s/2)};i.draw(a)}if(this.options.debugWebGL){const r=n.getError();if(r!=n.NO_ERROR)throw new Error(`WebGL error ${r}`)}}ySvgToView(e){return-e+this.height/2}xSvgToView(e){return e-this.width/2}syncDomain(){const e=this.model,n=this.gl,r=[this.xSvgToView(e.xScale(0)),this.ySvgToView(e.yScale(0))],i=[this.xSvgToView(e.xScale(1)),this.ySvgToView(e.yScale(1))],o=[i[0]-r[0],i[1]-r[1]];n.uniform2fv(this.program.locations.uModelScale,o),n.uniform2fv(this.program.locations.uModelTranslation,r)}}function Zs(t,e){if(!e){const r=t.getContext("webgl2");if(r)return r}const n=t.getContext("webgl");if(n)return n;throw new Error("Unable to initialize WebGL. Your browser or machine may not support it.")}class Ks{constructor(e,n,r){this.options=n;const i=document.createElement("canvas"),o=i.style;o.position="absolute",o.width=o.height="100%",o.left=o.right=o.top=o.bottom="0",e.shadowRoot.appendChild(i),this.gl=Zs(i,n.forceWebGL1);const s=wr(n.backgroundColor);this.gl.clearColor(...s),this.canvas=i,r.updated.on(()=>this.clear()),r.resized.on((a,c)=>this.onResize(a,c)),r.disposing.on(()=>{e.shadowRoot.removeChild(i),i.width=0,i.height=0;const a=this.gl.getExtension("WEBGL_lose_context");a&&a.loseContext()})}onResize(e,n){const r=this.canvas,i=this.options.pixelRatio;r.width=e*i,r.height=n*i,this.gl.viewport(0,0,r.width,r.height)}clear(){const e=this.gl;e.clear(e.COLOR_BUFFER_BIT)}}class Qs{constructor(e,n){this.svgNode=document.createElementNS("http://www.w3.org/2000/svg","svg");const r=this.svgNode.style;r.position="absolute",r.width=r.height="100%",r.left=r.right=r.top=r.bottom="0",e.shadowRoot.appendChild(this.svgNode),n.disposing.on(()=>{e.shadowRoot.removeChild(this.svgNode)})}}function Js(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.classList.add("content-box"),n.x.baseVal.value=e.paddingLeft,n.y.baseVal.value=e.paddingRight,t.resized.on((r,i)=>{n.width.baseVal.value=r-e.paddingRight-e.paddingLeft,n.height.baseVal.value=i-e.paddingTop-e.paddingBottom}),n}class _r{constructor(e,n,r){this.node=document.createElement("div"),this.node.style.position="absolute",this.node.style.left=`${r.paddingLeft}px`,this.node.style.right=`${r.paddingRight}px`,this.node.style.top=`${r.paddingTop}px`,this.node.style.bottom=`${r.paddingBottom}px`,e.shadowRoot.appendChild(this.node),n.disposing.on(()=>{e.shadowRoot.removeChild(this.node)})}}_r.meta={name:"contentBoxDetector",required:["wrapper","options"],optional:["svgLayer","canvasLayer"]};function ta(...t){return[...t[0]].map((e,n)=>t.map(r=>r[n]))}function ea(t){let e=0,n=0,r=0,i=0;const o=t.length;for(const l of t)e+=l.x,n+=l.y,r+=l.x*l.y,i+=l.x*l.x;const s=o*i-e*e,a=s===0?0:(o*r-e*n)/s,c=(n-a*e)/o;return{k:a,b:c}}function Ze(t){const e=t.domain(),n=t.range();return(e[1]-e[0])/(n[1]-n[0])}function Ke(t,e){const n=e[1]-e[0],r=t.scale.domain();if((r[1]-r[0])*n<=0)return!1;const i=Math.min(t.maxDomainExtent,t.maxDomain-t.minDomain,Math.max(t.minDomainExtent,n)),o=(i-n)/2;e[0]-=o,e[1]+=o;const s=Math.min(Math.max(t.minDomain-e[0],0),t.maxDomain-e[1]);e[0]+=s,e[1]+=s;const a=i*1e-6;return t.scale.domain(e),!!ta(e,r).some(([c,l])=>Math.abs(c-l)>a)}function na(t){const e=t.reduce((n,r)=>n+r)/t.length;return t.map(n=>(n-e)**2).reduce((n,r)=>n+r)/t.length}function Nn(t,e,n){return t>n?n:t<e?e:t}var E;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.X=1]="X",t[t.Y=2]="Y"})(E||(E={}));function oe(t){return[{dir:E.X,op:t.x},{dir:E.Y,op:t.y}].filter(e=>e.op!==void 0)}class ra{constructor(e,n){this.el=e,this.options=n,this.scaleUpdated=new it,this.majorDirection=E.UNKNOWN,this.previousPoints=new Map,this.enabled={[E.X]:!1,[E.Y]:!1},e.addEventListener("touchstart",r=>this.onTouchStart(r),{passive:!0}),e.addEventListener("touchend",r=>this.onTouchEnd(r),{passive:!0}),e.addEventListener("touchcancel",r=>this.onTouchEnd(r),{passive:!0}),e.addEventListener("touchmove",r=>this.onTouchMove(r),{passive:!0}),this.update()}update(){this.syncEnabled(),this.syncTouchAction()}syncEnabled(){for(const{dir:e,op:n}of oe(this.options))if(!n)this.enabled[e]=!1;else{const r=n.scale.domain().sort();this.enabled[e]=n.minDomain<r[0]&&r[1]<n.maxDomain}}syncTouchAction(){const e=[];this.enabled[E.X]||e.push("pan-x"),this.enabled[E.Y]||e.push("pan-y"),e.length===0&&e.push("none"),this.el.style.touchAction=e.join(" ")}calcKB(e,n,r){if(e===this.majorDirection&&r.length>=2){const s=n.scale.domain(),a=s[1]-s[0];if(na(r.map(c=>c.domain))>1e-4*a*a)return ea(r.map(c=>({x:c.current,y:c.domain})))}const i=Ze(n.scale),o=r.map(s=>s.domain-i*s.current).reduce((s,a)=>s+a)/r.length;return{k:i,b:o}}touchPoints(e){const n=this.el.getBoundingClientRect(),r=new Map([...e].map(o=>[o.identifier,{[E.X]:o.clientX-n.left,[E.Y]:o.clientY-n.top}]));let i=!1;for(const{dir:o,op:s}of oe(this.options)){const a=s.scale,c=[...r.entries()].map(([f,d])=>({current:d[o],previousPoint:this.previousPoints.get(f)})).filter(f=>f.previousPoint!==void 0).map(({current:f,previousPoint:d})=>({current:f,domain:a.invert(d[o])}));if(c.length===0)continue;const{k:l,b:u}=this.calcKB(o,s,c),h=a.range().map(f=>u+l*f);Ke(s,h)&&(i=!0)}return this.previousPoints=r,i&&this.scaleUpdated.dispatch(),i}dirOptions(e){return{[E.X]:this.options.x,[E.Y]:this.options.y}[e]}onTouchStart(e){if(this.majorDirection===E.UNKNOWN&&e.touches.length>=2){let i=function(a){const c=a.reduce((l,u)=>l+u)/a.length;return a.map(l=>(l-c)**2).reduce((l,u)=>l+u)};var n=i;const r=[...e.touches],o=i(r.map(a=>a.clientX)),s=i(r.map(a=>a.clientY));this.majorDirection=o>s?E.X:E.Y,this.dirOptions(this.majorDirection)===void 0&&(this.majorDirection=E.UNKNOWN)}this.touchPoints(e.touches)}onTouchEnd(e){e.touches.length<2&&(this.majorDirection=E.UNKNOWN),this.touchPoints(e.touches)}onTouchMove(e){this.touchPoints(e.touches)}}class ia{constructor(e,n){this.el=e,this.options=n,this.scaleUpdated=new it,e.addEventListener("wheel",r=>this.onWheel(r))}onWheel(e){e.preventDefault();let n=e.deltaX,r=e.deltaY;switch(e.deltaMode){case 1:n*=30,r*=30;break;case 2:n*=400,r*=400;break}const i={[E.X]:{translate:0,zoom:0},[E.Y]:{translate:0,zoom:0}};e.ctrlKey?e.altKey?(i[E.X].zoom=n,i[E.Y].zoom=r):i[E.X].zoom=n+r:e.altKey?(i[E.X].translate=n,i[E.Y].translate=r):i[E.X].translate=n+r;const o=this.el.getBoundingClientRect(),s={[E.X]:e.clientX-o.left,[E.Y]:e.clientY-o.top};let a=!1;for(const{dir:c,op:l}of oe(this.options)){const u=l.scale.domain(),h=Ze(l.scale),f=i[c],d=l.scale.invert(s[c]);f.translate*=h,f.zoom*=.002,e.shiftKey&&(f.translate*=5,f.zoom*=5);const y=.4*(u[1]-u[0]);f.translate=Nn(f.translate,-y,y);const w=.5;f.zoom=Nn(f.zoom,-w,w);const M=u.map(b=>b+f.translate+(b-d)*f.zoom);Ke(l,M)&&(a=!0)}a&&this.scaleUpdated.dispatch()}}class oa{constructor(e,n){this.el=e,this.options=n,this.scaleUpdated=new it,this.previousPoint=null,e.style.userSelect="none",e.addEventListener("pointerdown",r=>this.onMouseDown(r)),e.addEventListener("pointerup",r=>this.onMouseUp(r)),e.addEventListener("pointermove",r=>this.onMouseMove(r))}point(e){const n=this.el.getBoundingClientRect();return{[E.X]:e.clientX-n.left,[E.Y]:e.clientY-n.top}}onMouseMove(e){if(this.previousPoint===null)return;const n=this.point(e);let r=!1;for(const{dir:i,op:o}of oe(this.options)){const s=n[i]-this.previousPoint[i],a=Ze(o.scale),l=o.scale.domain().map(u=>u-a*s);Ke(o,l)&&(r=!0)}this.previousPoint=n,r&&this.scaleUpdated.dispatch()}onMouseDown(e){e.pointerType==="mouse"&&(this.el.setPointerCapture(e.pointerId),this.previousPoint=this.point(e),this.el.style.cursor="grabbing")}onMouseUp(e){this.previousPoint!==null&&(this.previousPoint=null,this.el.releasePointerCapture(e.pointerId),this.el.style.cursor="")}}const Ln={minDomain:-1/0,maxDomain:1/0,minDomainExtent:0,maxDomainExtent:1/0};class sa{constructor(e,n){this.scaleUpdated=new it,n=n??{},this.options={x:n.x&&Object.assign(Object.assign({},Ln),n.x),y:n.y&&Object.assign(Object.assign({},Ln),n.y)},this.touch=new ra(e,this.options),this.mouse=new oa(e,this.options),this.wheel=new ia(e,this.options);const r=()=>this.scaleUpdated.dispatch();this.touch.scaleUpdated.on(r),this.mouse.scaleUpdated.on(r),this.wheel.scaleUpdated.on(r)}onScaleUpdated(e){this.scaleUpdated.on(e)}update(){this.touch.update()}}var Ie="http://www.w3.org/1999/xhtml";const Pn={svg:"http://www.w3.org/2000/svg",xhtml:Ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Sr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pn.hasOwnProperty(e)?{space:Pn[e],local:t}:t}function aa(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ie&&e.documentElement.namespaceURI===Ie?e.createElement(t):e.createElementNS(n,t)}}function ca(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Mr(t){var e=Sr(t);return(e.local?ca:aa)(e)}function la(){}function Cr(t){return t==null?la:function(){return this.querySelector(t)}}function ua(t){typeof t!="function"&&(t=Cr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new X(r,this._parents)}function Ar(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fa(){return[]}function ha(t){return t==null?fa:function(){return this.querySelectorAll(t)}}function da(t){return function(){var e=t.apply(this,arguments);return e==null?[]:Ar(e)}}function ga(t){typeof t=="function"?t=da(t):t=ha(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(t.call(c,c.__data__,l,s)),i.push(c));return new X(r,i)}function ma(t){return function(){return this.matches(t)}}function Tr(t){return function(e){return e.matches(t)}}var pa=Array.prototype.find;function ya(t){return function(){return pa.call(this.children,t)}}function xa(){return this.firstElementChild}function va(t){return this.select(t==null?xa:ya(typeof t=="function"?t:Tr(t)))}var wa=Array.prototype.filter;function ba(){return this.children}function _a(t){return function(){return wa.call(this.children,t)}}function Sa(t){return this.selectAll(t==null?ba:_a(typeof t=="function"?t:Tr(t)))}function Ma(t){typeof t!="function"&&(t=ma(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new X(r,this._parents)}function Dr(t){return new Array(t.length)}function Ca(){return new X(this._enter||this._groups.map(Dr),this._parents)}function se(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}se.prototype={constructor:se,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Aa(t){return function(){return t}}function Ta(t,e,n,r,i,o){for(var s=0,a,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new se(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function Da(t,e,n,r,i,o,s){var a,c,l=new Map,u=e.length,h=o.length,f=new Array(u),d;for(a=0;a<u;++a)(c=e[a])&&(f[a]=d=s.call(c,c.__data__,a,e)+"",l.has(d)?i[a]=c:l.set(d,c));for(a=0;a<h;++a)d=s.call(t,o[a],a,o)+"",(c=l.get(d))?(r[a]=c,c.__data__=o[a],l.delete(d)):n[a]=new se(t,o[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(f[a])===c&&(i[a]=c)}function Ra(t){return t.__data__}function Ea(t,e){if(!arguments.length)return Array.from(this,Ra);var n=e?Da:Ta,r=this._parents,i=this._groups;typeof t!="function"&&(t=Aa(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],h=i[l],f=h.length,d=Ar(t.call(u,u&&u.__data__,l,r)),m=d.length,y=a[l]=new Array(m),w=s[l]=new Array(m),M=c[l]=new Array(f);n(u,h,y,w,M,d,e);for(var b=0,v=0,T,C;b<m;++b)if(T=y[b]){for(b>=v&&(v=b+1);!(C=w[v])&&++v<m;);T._next=C||null}}return s=new X(s,r),s._enter=a,s._exit=c,s}function Na(){return new X(this._exit||this._groups.map(Dr),this._parents)}function La(t,e,n){var r=this.enter(),i=this,o=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Pa(t){if(!(t instanceof X))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],l=n[a],u=c.length,h=s[a]=new Array(u),f,d=0;d<u;++d)(f=c[d]||l[d])&&(h[d]=f);for(;a<r;++a)s[a]=e[a];return new X(s,this._parents)}function ka(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Ua(t){t||(t=$a);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(e)}return new X(i,this._parents).order()}function $a(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Fa(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ia(){return Array.from(this)}function Ya(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Oa(){let t=0;for(const e of this)++t;return t}function Wa(){return!this.node()}function Ba(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function Va(t){return function(){this.removeAttribute(t)}}function za(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qa(t,e){return function(){this.setAttribute(t,e)}}function Ha(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Xa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ga(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ja(t,e){var n=Sr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?za:Va:typeof e=="function"?n.local?Ga:Xa:n.local?Ha:qa)(n,e))}function Rr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Za(t){return function(){this.style.removeProperty(t)}}function Ka(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Qa(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ja(t,e,n){return arguments.length>1?this.each((e==null?Za:typeof e=="function"?Qa:Ka)(t,e,n??"")):tc(this.node(),t)}function tc(t,e){return t.style.getPropertyValue(e)||Rr(t).getComputedStyle(t,null).getPropertyValue(e)}function ec(t){return function(){delete this[t]}}function nc(t,e){return function(){this[t]=e}}function rc(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ic(t,e){return arguments.length>1?this.each((e==null?ec:typeof e=="function"?rc:nc)(t,e)):this.node()[t]}function Er(t){return t.trim().split(/^|\s+/)}function Qe(t){return t.classList||new Nr(t)}function Nr(t){this._node=t,this._names=Er(t.getAttribute("class")||"")}Nr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Lr(t,e){for(var n=Qe(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Pr(t,e){for(var n=Qe(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function oc(t){return function(){Lr(this,t)}}function sc(t){return function(){Pr(this,t)}}function ac(t,e){return function(){(e.apply(this,arguments)?Lr:Pr)(this,t)}}function cc(t,e){var n=Er(t+"");if(arguments.length<2){for(var r=Qe(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ac:e?oc:sc)(n,e))}function lc(){this.textContent=""}function uc(t){return function(){this.textContent=t}}function fc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function hc(t){return arguments.length?this.each(t==null?lc:(typeof t=="function"?fc:uc)(t)):this.node().textContent}function dc(){this.innerHTML=""}function gc(t){return function(){this.innerHTML=t}}function mc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function pc(t){return arguments.length?this.each(t==null?dc:(typeof t=="function"?mc:gc)(t)):this.node().innerHTML}function yc(){this.nextSibling&&this.parentNode.appendChild(this)}function xc(){return this.each(yc)}function vc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wc(){return this.each(vc)}function bc(t){var e=typeof t=="function"?t:Mr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function _c(){return null}function Sc(t,e){var n=typeof t=="function"?t:Mr(t),r=e==null?_c:typeof e=="function"?e:Cr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Mc(){var t=this.parentNode;t&&t.removeChild(this)}function Cc(){return this.each(Mc)}function Ac(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Tc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Dc(t){return this.select(t?Tc:Ac)}function Rc(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ec(t){return function(e){t.call(this,e,this.__data__)}}function Nc(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Lc(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Pc(t,e,n){return function(){var r=this.__on,i,o=Ec(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function kc(t,e,n){var r=Nc(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?Pc:Lc,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function kr(t,e,n){var r=Rr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Uc(t,e){return function(){return kr(this,t,e)}}function $c(t,e){return function(){return kr(this,t,e.apply(this,arguments))}}function Fc(t,e){return this.each((typeof e=="function"?$c:Uc)(t,e))}function*Ic(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Yc=[null];function X(t,e){this._groups=t,this._parents=e}function Oc(){return this}X.prototype={constructor:X,select:ua,selectAll:ga,selectChild:va,selectChildren:Sa,filter:Ma,data:Ea,enter:Ca,exit:Na,join:La,merge:Pa,selection:Oc,order:ka,sort:Ua,call:Fa,nodes:Ia,node:Ya,size:Oa,empty:Wa,each:Ba,attr:ja,style:Ja,property:ic,classed:cc,text:hc,html:pc,raise:xc,lower:wc,append:bc,insert:Sc,remove:Cc,clone:Dc,datum:Rc,on:kc,dispatch:Fc,[Symbol.iterator]:Ic};function Wc(t){return typeof t=="string"?new X([[document.querySelector(t)]],[document.documentElement]):new X([[t]],Yc)}var Se=Array.prototype.slice;function Bc(t){return t}var Me=1,Ce=2,Ye=3,Lt=4,kn=1e-6;function Vc(t){return"translate("+t+",0)"}function zc(t){return"translate(0,"+t+")"}function qc(t){return e=>+t(e)}function Hc(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Xc(){return!this.__axis}function Ur(t,e){var n=[],r=null,i=null,o=6,s=6,a=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Me||t===Lt?-1:1,u=t===Lt||t===Ce?"x":"y",h=t===Me||t===Ye?Vc:zc;function f(d){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),y=i??(e.tickFormat?e.tickFormat.apply(e,n):Bc),w=Math.max(o,0)+a,M=e.range(),b=+M[0]+c,v=+M[M.length-1]+c,T=(e.bandwidth?Hc:qc)(e.copy(),c),C=d.selection?d.selection():d,x=C.selectAll(".domain").data([null]),_=C.selectAll(".tick").data(m,e).order(),P=_.exit(),N=_.enter().append("g").attr("class","tick"),U=_.select("line"),S=_.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(N),U=U.merge(N.append("line").attr("stroke","currentColor").attr(u+"2",l*o)),S=S.merge(N.append("text").attr("fill","currentColor").attr(u,l*w).attr("dy",t===Me?"0em":t===Ye?"0.71em":"0.32em")),d!==C&&(x=x.transition(d),_=_.transition(d),U=U.transition(d),S=S.transition(d),P=P.transition(d).attr("opacity",kn).attr("transform",function(F){return isFinite(F=T(F))?h(F+c):this.getAttribute("transform")}),N.attr("opacity",kn).attr("transform",function(F){var $=this.parentNode.__axis;return h(($&&isFinite($=$(F))?$:T(F))+c)})),P.remove(),x.attr("d",t===Lt||t===Ce?s?"M"+l*s+","+b+"H"+c+"V"+v+"H"+l*s:"M"+c+","+b+"V"+v:s?"M"+b+","+l*s+"V"+c+"H"+v+"V"+l*s:"M"+b+","+c+"H"+v),_.attr("opacity",1).attr("transform",function(F){return h(T(F)+c)}),U.attr(u+"2",l*o),S.attr(u,l*w).text(y),C.filter(Xc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ce?"start":t===Lt?"end":"middle"),C.each(function(){this.__axis=T})}return f.scale=function(d){return arguments.length?(e=d,f):e},f.ticks=function(){return n=Se.call(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Se.call(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Se.call(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(o=s=+d,f):o},f.tickSizeInner=function(d){return arguments.length?(o=+d,f):o},f.tickSizeOuter=function(d){return arguments.length?(s=+d,f):s},f.tickPadding=function(d){return arguments.length?(a=+d,f):a},f.offset=function(d){return arguments.length?(c=+d,f):c},f}function Gc(t){return Ur(Ye,t)}function jc(t){return Ur(Lt,t)}class Zc{constructor(e,n,r){this.model=e,this.options=r,this.xAxis=Gc(this.model.xScale),this.yAxis=jc(this.model.yScale);const i=Wc(n);this.xg=i.append("g"),this.yg=i.append("g"),e.updated.on(()=>this.update()),e.resized.on((o,s)=>this.onResize(o,s))}update(){const e=this.model.xScale,n=this.options.xScaleType().domain(e.domain().map(r=>r+this.options.baseTime)).range(e.range());this.xAxis.scale(n),this.xg.call(this.xAxis),this.yAxis.scale(this.model.yScale),this.yg.call(this.yAxis)}onResize(e,n){const r=this.options;this.xg.attr("transform",`translate(0, ${n-r.paddingBottom})`),this.yg.attr("transform",`translate(${r.paddingLeft}, 0)`),this.update()}}class Kc{constructor(e,n,r){this.el=e,this.model=n,this.options=r,this.items=new Map,this.legend=document.createElement("chart-legend");const i=this.legend.style;i.position="absolute",i.right=`${r.paddingRight}px`,i.top=`${r.paddingTop}px`;const o=this.legend.attachShadow({mode:"open"}),s=document.createElement("style");s.textContent=`
:host {
    background: var(--background-overlay, white);
    border: 1px solid hsl(0, 0%, 80%);
    border-radius: 3px;
    padding: 5px 10px;
}
.item {
    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    user-select: none;
}
.item:not(.visible) {
    color: gray;
    text-decoration: line-through;
}
.item .example {
    width: 50px;
    margin-right: 10px;
    max-height: 1em;
}`,o.appendChild(s),this.itemContainer=o,this.update(),e.shadowRoot.appendChild(this.legend),n.updated.on(()=>this.update()),n.disposing.on(()=>{e.shadowRoot.removeChild(this.legend)})}update(){var e;for(const n of this.options.series){if(!this.items.has(n)){const i=document.createElement("div");i.className="item";const o=document.createElement("div");o.className="example",i.appendChild(o);const s=document.createElement("label");s.textContent=n.name,i.appendChild(s),this.itemContainer.appendChild(i),i.addEventListener("click",a=>{n.visible=!n.visible,this.model.update()}),this.items.set(n,{item:i,example:o})}const r=this.items.get(n);r.item.classList.toggle("visible",n.visible),r.example.style.height=`${(e=n.lineWidth)!==null&&e!==void 0?e:this.options.lineWidth}px`,r.example.style.backgroundColor=n.color.toString()}}}class $r{constructor(e,n,r,i){const o=Js(n,r),s=o.createSVGTransform();s.setTranslate(0,0);const a=document.createElementNS("http://www.w3.org/2000/svg","style");a.textContent=`
.timechart-crosshair {
    stroke: currentColor;
    stroke-width: 1;
    stroke-dasharray: 2 1;
    visibility: hidden;
}`;const c=document.createElementNS("http://www.w3.org/2000/svg","line");c.transform.baseVal.initialize(s),c.x2.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100);const l=document.createElementNS("http://www.w3.org/2000/svg","line");l.transform.baseVal.initialize(s),l.y2.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100);const u=document.createElementNS("http://www.w3.org/2000/svg","g");u.classList.add("timechart-crosshair");for(const h of[a,c,l])u.appendChild(h);i.node.addEventListener("mousemove",h=>{const f=o.getBoundingClientRect();c.transform.baseVal.getItem(0).setTranslate(0,h.clientY-f.y),l.transform.baseVal.getItem(0).setTranslate(h.clientX-f.x,0)}),i.node.addEventListener("mouseenter",h=>u.style.visibility="visible"),i.node.addEventListener("mouseleave",h=>u.style.visibility="hidden"),o.appendChild(u),e.svgNode.appendChild(o)}}$r.meta={name:"crosshair",required:["svgLayer","model","options","contentBoxDetector"]};class Fr{constructor(e,n,r,i){this.canvas=e,this.model=n,this.options=r,this.points=new Map,this.lastX=null,this.updated=new it,i.node.addEventListener("mousemove",o=>{const s=e.canvas.getBoundingClientRect();this.lastX=o.clientX-s.left,this.adjustPoints()}),i.node.addEventListener("mouseleave",o=>{this.lastX=null,this.adjustPoints()}),n.updated.on(()=>this.adjustPoints())}adjustPoints(){if(this.lastX===null)this.points.clear();else{const e=this.model.xScale.invert(this.lastX);for(const n of this.options.series){if(n.data.length==0||!n.visible){this.points.delete(n);continue}const r=$e(n.data,0,n.data.length,e,l=>l.x),i=[];r>0&&i.push(n.data[r-1]),r<n.data.length&&i.push(n.data[r]);const o=l=>Math.abs(l.x-e);i.sort((l,u)=>o(l)-o(u));const s=this.model.pxPoint(i[0]),a=this.canvas.canvas.clientWidth,c=this.canvas.canvas.clientHeight;s.x<=a&&s.x>=0&&s.y<=c&&s.y>=0?this.points.set(n,s):this.points.delete(n)}}this.updated.dispatch()}}Fr.meta={name:"nearestPointModel",required:["canvasLayer","model","options","contentBoxDetector"]};class Ir{constructor(e,n,r){this.svg=e,this.options=n,this.pModel=r,this.intersectPoints=new Map,e.svgNode.createSVGTransform().setTranslate(0,0);const o=document.createElementNS("http://www.w3.org/2000/svg","style");o.textContent=`
.timechart-crosshair-intersect {
    fill: var(--background-overlay, white);
    visibility: hidden;
}
.timechart-crosshair-intersect circle {
    r: 3px;
}`;const s=document.createElementNS("http://www.w3.org/2000/svg","g");s.classList.add("timechart-crosshair-intersect"),s.appendChild(o),this.container=s,this.adjustIntersectPoints(),e.svgNode.appendChild(s),r.updated.on(()=>this.adjustIntersectPoints())}adjustIntersectPoints(){var e;const n=this.svg.svgNode.createSVGTransform();n.setTranslate(0,0);for(const r of this.options.series){if(!this.intersectPoints.has(r)){const s=document.createElementNS("http://www.w3.org/2000/svg","circle");s.style.stroke=r.color.toString(),s.style.strokeWidth=`${(e=r.lineWidth)!==null&&e!==void 0?e:this.options.lineWidth}px`,s.transform.baseVal.initialize(n),this.container.appendChild(s),this.intersectPoints.set(r,s)}const i=this.intersectPoints.get(r),o=this.pModel.points.get(r);o?(i.style.visibility="visible",i.transform.baseVal.getItem(0).setTranslate(o.x,o.y)):i.style.visibility="hidden"}}}Ir.meta={name:"nearestPoint",required:["svgLayer","options","nearestPointModel"]};const Qc={pixelRatio:window.devicePixelRatio,lineWidth:1,backgroundColor:St(0,0,0,0),paddingTop:10,paddingRight:10,paddingLeft:45,paddingBottom:20,xRange:"auto",yRange:"auto",realTime:!1,baseTime:0,xScaleType:Es,debugWebGL:!1,forceWebGL1:!1},Jc={name:"",visible:!0};class tl{constructor(e,n){var r,i,o;this.el=e,this.disposed=!1,n=n??{};const s=(i=(r=n.series)===null||r===void 0?void 0:r.map(y=>this.completeSeriesOptions(y)))!==null&&i!==void 0?i:[],a=Object.assign(Object.assign(Object.assign({},Qc),n),{series:s});this.model=new Ls(a);const c=(o=e.shadowRoot)!==null&&o!==void 0?o:e.attachShadow({mode:"open"}),l=document.createElement("style");l.innerText=`
:host {
    contain: size layout paint style;
    position: relative;
}`,c.appendChild(l);const u=new Ks(e,a,this.model);new js(this.model,u.gl,a);const h=new Qs(e,this.model),f=new _r(e,this.model,a);new Zc(this.model,h.svgNode,a),new Kc(e,this.model,a),new $r(h,this.model,a,f);const d=new Fr(u,this.model,a,f);new Ir(h,a,d),this.options=Object.assign(a,{zoom:this.registerZoom(f.node,n.zoom)}),this.onResize();const m=()=>this.onResize();window.addEventListener("resize",m),this.model.disposing.on(()=>{window.removeEventListener("resize",m),c.removeChild(l)})}completeSeriesOptions(e){return Object.assign(Object.assign(Object.assign(Object.assign({data:[]},Jc),{color:getComputedStyle(this.el).getPropertyValue("color")}),e),{_complete:!0})}registerZoom(e,n){if(n){const r=new sa(e,{x:n.x&&Object.assign(Object.assign({},n.x),{scale:this.model.xScale}),y:n.y&&Object.assign(Object.assign({},n.y),{scale:this.model.yScale})}),i=r.options;return this.model.updated.on(()=>{const o=[[i.x,this.model.xScale,this.model.xRange],[i.y,this.model.yScale,this.model.yRange]];for(const[s,a,c]of o){if(!s?.autoRange)continue;let[l,u]=a.domain();c&&(l=Math.min(l,c.min),u=Math.max(u,c.max)),s.minDomain=l,s.maxDomain=u}r.update()}),r.onScaleUpdated(()=>{this.options.xRange=null,this.options.yRange=null,this.options.realTime=!1,this.update()}),i}}onResize(){this.model.resize(this.el.clientWidth,this.el.clientHeight)}update(){if(this.disposed)throw new Error("Cannot update after dispose.");for(let e=0;e<this.options.series.length;e++){const n=this.options.series[e];n._complete||(this.options.series[e]=this.completeSeriesOptions(n))}this.model.requestRedraw()}dispose(){this.model.dispose(),this.disposed=!0}}const el=tt('<div class="p-4 bg-gray-100"><h2 class="mb-2 text-lg"></h2><div class="bg-gray-50 p-2"><div id="plot_canvas">'),Un=t=>{let e;const[n,r]=wt(),i=()=>{const o=n();o!==void 0&&(o.update(),requestAnimationFrame(i))};return Zr(()=>{const o=new tl(e,{series:t.series});r(o),requestAnimationFrame(i),Ae(()=>{o.dispose()})}),Ae(()=>{r(void 0)}),(()=>{const o=el(),s=o.firstChild,a=s.nextSibling,c=a.firstChild;G(s,()=>t.title);const l=e;return typeof l=="function"?qt(l,c):e=c,c.style.setProperty("width","100%"),c.style.setProperty("height","300px"),o})()},nl=(t,e)=>{let n="data:text/csv;charset=utf-8,";n+=`seq,accel_x,accel_y,accel_z,gyro_x,gyro_y,gyro_z\r
`;const r=t[0],i=t[1],o=t[2],s=e[0],a=e[1],c=e[2];for(let h=0;h<r.length;h++)n+=`${r[h].x},${r[h].y},${i[h].y},${o[h].y},${s[h].y},${a[h].y},${c[h].y}\r
`;const l=encodeURI(n),u=document.createElement("a");u.setAttribute("href",l),u.setAttribute("download","imu_data.csv"),document.body.appendChild(u),u.click()},rl=tt('<div class="flex flex-col md:items-start p-4 bg-blue-100"><div>Samples: </div><button class="btn btn-blue mt-4">Download CSV'),il=tt('<div class="container mx-auto h-screen md:pt-4"><div class="p-4 text-lg font-bold bg-green-100">Bluetooth IMU'),ol=tt('<div class="flex flex-col md:items-start p-4 bg-gray-200"><div class="font-bold mb-4">IMU not connected</div><button class="btn btn-blue">Connect'),sl=new Map([[0,3],[1,3],[2,4],[3,6],[4,10],[5,17],[6,30],[7,60],[8,120],[9,240]]),al=()=>{const[t,e]=wt(),[n,r]=wt("idle"),[i,o]=wt(),[s,a]=wt(),c={lastSeq:0};let l=0;const u=async(m,y,w)=>{const M=t();if(M===void 0){console.warn("start clicked when imu === undefined");return}o([{data:[],name:"accel X",color:"red"},{data:[],name:"accel Y",color:"green"},{data:[],name:"accel Z",color:"blue"}]),a([{data:[],name:"gyro X",color:"red"},{data:[],name:"gyro Y",color:"green"},{data:[],name:"gyro Z",color:"blue"}]),c.lastSeq=0,l=sl.get(m)||0,await M.startSampling(m,y,w)},h=async()=>{const m=t();if(m===void 0){console.warn("stop clicked when imu === undefined");return}await m.stopSampling()},f=async()=>{try{const m=await yi();m.onStatusChange=y=>{r(y)},m.onDataReceived=y=>{if(y.seq!==c.lastSeq?(console.warn(`missed sample at: ${c.lastSeq}`),c.lastSeq=y.seq):c.lastSeq=c.lastSeq+1,y.seq<l)return;const w=i();if(w===void 0)return;$n(w,y.seq,y.accel);const M=s();M!==void 0&&$n(M,y.seq,y.gyro)},await m.init(),e(m)}catch(m){console.log(m)}},d=()=>{const m=i();if(m===void 0)return;const y=s();y!==void 0&&nl([m[0].data||[],m[1].data||[],m[2].data||[]],[y[0].data||[],y[1].data||[],y[2].data||[]])};return(()=>{const m=il();return m.firstChild,G(m,q(de,{get when(){return t()!==void 0},get fallback(){return(()=>{const y=ol(),w=y.firstChild,M=w.nextSibling;return M.$$click=f,y})()},get children(){return[q(pi,{get status(){return n()},onStop:h,onStart:u}),q(de,{get when(){return i()!==void 0},get children(){return[q(Un,{title:"Acceleration",get series(){return i()}}),q(Un,{title:"Rotation",get series(){return s()}}),q(de,{get when(){return st(()=>n()==="idle")()&&i()!==void 0},get children(){const y=rl(),w=y.firstChild;w.firstChild;const M=w.nextSibling;return G(w,()=>i()?.[0].data?.length,null),M.$$click=d,y}})]}})]}}),null),m})()};function $n(t,e,n){const r=t[0].data,i=t[1].data,o=t[2].data;r?.push({x:e,y:n.x}),i?.push({x:e,y:n.y}),o?.push({x:e,y:n.z})}qn(["click"]);const cl=document.getElementById("root");oi(()=>q(al,{}),cl);
